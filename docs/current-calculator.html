<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electro-Funk Magnet Power Calculator</title>
    <style>
        :root {
            --primary: #8a2be2;
            --secondary: #00ffff;
            --accent: #ff00ff;
            --dark: #0a0a1a;
            --light: #f0f0ff;
            --error: #ff3860;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark) 0%, #1a1a2e 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(10, 10, 26, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.3);
            border: 1px solid var(--primary);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent), var(--primary));
            z-index: -1;
            filter: blur(20px);
            opacity: 0.3;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            font-style: italic;
            color: #aaa;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--secondary);
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid var(--primary);
            background: rgba(20, 20, 40, 0.8);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .col {
            flex: 1;
        }
        
        .results {
            background: rgba(30, 30, 60, 0.6);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--secondary);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-value {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        .highlight {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.3);
        }
        
        .error {
            color: var(--error);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .funky-border {
            position: relative;
            padding: 2px;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            margin-bottom: 20px;
        }
        
        .funky-border > div {
            background: var(--dark);
            border-radius: 10px;
            padding: 15px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9rem;
            color: #888;
        }
        
        .irreverent-note {
            font-style: italic;
            margin-top: 10px;
            color: #aaa;
            text-align: center;
        }
        
        .info-box {
            background: rgba(0, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            border-left: 4px solid var(--secondary);
        }
        
        .info-box p {
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Electro-Funk Magnet Power Calculator</h1>
        <p class="subtitle">Because your copper wire won't power itself</p>
        
        <div class="funky-border">
            <div>
                <div class="input-group">
                    <label for="batteryCapacity">Battery Capacity (mAh)</label>
                    <input type="number" id="batteryCapacity" value="1600" min="1" step="1">
                    <div class="error" id="batteryError">Please enter a valid battery capacity</div>
                </div>
                
                <div class="input-group">
                    <label for="voltage">Voltage (V)</label>
                    <input type="number" id="voltage" value="3.7" min="0.1" step="0.1">
                    <div class="error" id="voltageError">Please enter a valid voltage</div>
                </div>
                
                <div class="row">
                    <div class="col">
                        <div class="input-group">
                            <label for="wireGauge">Wire Gauge (AWG)</label>
                            <select id="wireGauge">
                                <option value="18">18 AWG</option>
                                <option value="20">20 AWG</option>
                                <option value="22" selected>22 AWG</option>
                                <option value="24">24 AWG</option>
                                <option value="26">26 AWG</option>
                                <option value="28">28 AWG</option>
                                <option value="30">30 AWG</option>
                            </select>
                        </div>
                    </div>
                    <div class="col">
                        <div class="input-group">
                            <label for="wireLength">Wire Length (feet)</label>
                            <input type="number" id="wireLength" value="252" min="1" step="1">
                            <div class="error" id="lengthError">Please enter a valid wire length</div>
                        </div>
                    </div>
                </div>
                
                <div class="info-box">
                    <p><strong>Calculated Resistance:</strong> <span id="calculatedResistance">16.8 Ω</span></p>
                    <p><strong>Calculated Current Draw:</strong> <span id="calculatedCurrent">220 mA</span></p>
                </div>
                
                <div class="row">
                    <div class="col">
                        <div class="input-group">
                            <label for="modeSelect">Pulse Control Method</label>
                            <select id="modeSelect">
                                <option value="duty">Duty Cycle (%)</option>
                                <option value="duration">Pulse Duration (ms)</option>
                            </select>
                        </div>
                    </div>
                    <div class="col">
                        <div class="input-group">
                            <label for="frequency">Frequency (Hz)</label>
                            <input type="number" id="frequency" value="50" min="1" max="100" step="1">
                            <div class="error" id="frequencyError">Please enter a frequency between 1-100 Hz</div>
                        </div>
                    </div>
                </div>
                
                <div class="input-group" id="dutyGroup">
                    <label for="dutyCycle">Duty Cycle (%)</label>
                    <input type="number" id="dutyCycle" value="10" min="0.1" max="100" step="0.1">
                    <div class="error" id="dutyError">Please enter a duty cycle between 0.1-100%</div>
                </div>
                
                <div class="input-group" id="durationGroup" style="display: none;">
                    <label for="pulseDuration">Pulse Duration (ms)</label>
                    <input type="number" id="pulseDuration" value="2" min="0.1" max="1000" step="0.1">
                    <div class="error" id="durationError">Please enter a valid pulse duration</div>
                </div>
                
                <div class="input-group">
                    <label for="cycleTime">Cycle Time (minutes)</label>
                    <input type="number" id="cycleTime" value="15" min="1" step="1">
                    <div class="error" id="cycleError">Please enter a valid cycle time</div>
                </div>
            </div>
        </div>
        
        <div class="results">
            <h2>Results</h2>
            <div class="result-item">
                <span>Average Current Draw:</span>
                <span class="result-value" id="avgCurrent">22.0 mA</span>
            </div>
            <div class="result-item">
                <span>Power Consumption:</span>
                <span class="result-value" id="powerDraw">0.08 W</span>
            </div>
            <div class="result-item">
                <span>Total Runtime:</span>
                <span class="result-value" id="totalRuntime">72.7 hours</span>
            </div>
            <div class="result-item">
                <span>Number of Cycles:</span>
                <span class="result-value" id="cycleCount">291 cycles</span>
            </div>
            
            <div class="highlight pulse-animation" id="finalResult">
                Your battery will last for approximately 72.7 hours
            </div>
        </div>
        
        <p class="irreverent-note">
            * Calculations assume your electromagnet doesn't accidentally open a portal to another dimension
        </p>
        
        <footer>
            <p>Electro-Funk Magnet Power Calculator v2.0 | Now with wire physics!</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all input elements
            const batteryCapacity = document.getElementById('batteryCapacity');
            const voltage = document.getElementById('voltage');
            const wireGauge = document.getElementById('wireGauge');
            const wireLength = document.getElementById('wireLength');
            const modeSelect = document.getElementById('modeSelect');
            const frequency = document.getElementById('frequency');
            const dutyCycle = document.getElementById('dutyCycle');
            const pulseDuration = document.getElementById('pulseDuration');
            const cycleTime = document.getElementById('cycleTime');
            
            // Get result elements
            const calculatedResistance = document.getElementById('calculatedResistance');
            const calculatedCurrent = document.getElementById('calculatedCurrent');
            const avgCurrent = document.getElementById('avgCurrent');
            const powerDraw = document.getElementById('powerDraw');
            const totalRuntime = document.getElementById('totalRuntime');
            const cycleCount = document.getElementById('cycleCount');
            const finalResult = document.getElementById('finalResult');
            
            // Get error elements
            const batteryError = document.getElementById('batteryError');
            const voltageError = document.getElementById('voltageError');
            const lengthError = document.getElementById('lengthError');
            const frequencyError = document.getElementById('frequencyError');
            const dutyError = document.getElementById('dutyError');
            const durationError = document.getElementById('durationError');
            const cycleError = document.getElementById('cycleError');
            
            // Get group elements for mode switching
            const dutyGroup = document.getElementById('dutyGroup');
            const durationGroup = document.getElementById('durationGroup');
            
            // Wire resistance table (ohms per 1000 feet at 20°C)
            const wireResistance = {
                "18": 6.385,
                "20": 10.15,
                "22": 16.14,
                "24": 25.67,
                "26": 40.81,
                "28": 64.90,
                "30": 103.2
            };
            
            // Set default pulse duration based on default duty cycle and frequency
            pulseDuration.value = (dutyCycle.value / 100) * (1000 / frequency.value);
            
            // Mode selection handler
            modeSelect.addEventListener('change', function() {
                if (this.value === 'duty') {
                    dutyGroup.style.display = 'block';
                    durationGroup.style.display = 'none';
                } else {
                    dutyGroup.style.display = 'none';
                    durationGroup.style.display = 'block';
                }
                calculateResults();
            });
            
            // Add event listeners to all inputs
            const inputs = [
                batteryCapacity, voltage, wireGauge, wireLength, frequency, 
                dutyCycle, pulseDuration, cycleTime
            ];
            
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    validateInput(this);
                    calculateResults();
                });
            });
            
            // Validate input function
            function validateInput(input) {
                const value = parseFloat(input.value);
                let isValid = true;
                let errorMessage = '';
                
                switch(input.id) {
                    case 'batteryCapacity':
                        isValid = !isNaN(value) && value > 0;
                        errorMessage = 'Please enter a valid battery capacity';
                        break;
                    case 'voltage':
                        isValid = !isNaN(value) && value > 0;
                        errorMessage = 'Please enter a valid voltage';
                        break;
                    case 'wireLength':
                        isValid = !isNaN(value) && value > 0;
                        errorMessage = 'Please enter a valid wire length';
                        break;
                    case 'frequency':
                        isValid = !isNaN(value) && value >= 1 && value <= 100;
                        errorMessage = 'Please enter a frequency between 1-100 Hz';
                        break;
                    case 'dutyCycle':
                        isValid = !isNaN(value) && value >= 0.1 && value <= 100;
                        errorMessage = 'Please enter a duty cycle between 0.1-100%';
                        break;
                    case 'pulseDuration':
                        isValid = !isNaN(value) && value > 0;
                        errorMessage = 'Please enter a valid pulse duration';
                        break;
                    case 'cycleTime':
                        isValid = !isNaN(value) && value > 0;
                        errorMessage = 'Please enter a valid cycle time';
                        break;
                }
                
                // Show/hide error message
                const errorElement = document.getElementById(input.id + 'Error');
                if (errorElement) {
                    errorElement.style.display = isValid ? 'none' : 'block';
                }
                
                return isValid;
            }
            
            // Calculate wire resistance and current
            function calculateWireProperties() {
                const gauge = wireGauge.value;
                const length = parseFloat(wireLength.value);
                const volt = parseFloat(voltage.value);
                
                // Calculate resistance
                const resistancePerFoot = wireResistance[gauge] / 1000;
                const totalResistance = resistancePerFoot * length;
                
                // Calculate current using Ohm's Law: I = V / R
                const current = volt / totalResistance * 1000; // Convert to mA
                
                // Update display
                calculatedResistance.textContent = `${totalResistance.toFixed(2)} Ω`;
                calculatedCurrent.textContent = `${current.toFixed(0)} mA`;
                
                return {
                    resistance: totalResistance,
                    current: current
                };
            }
            
            // Calculate results function
            function calculateResults() {
                // Validate all inputs first
                const inputsValid = inputs.every(input => validateInput(input));
                if (!inputsValid) return;
                
                // Get wire properties
                const wireProps = calculateWireProperties();
                const current = wireProps.current;
                
                // Get other values
                const battery = parseFloat(batteryCapacity.value);
                const volt = parseFloat(voltage.value);
                const freq = parseFloat(frequency.value);
                const cycle = parseFloat(cycleTime.value);
                
                let duty;
                
                // Calculate duty cycle based on mode
                if (modeSelect.value === 'duty') {
                    duty = parseFloat(dutyCycle.value) / 100;
                } else {
                    const duration = parseFloat(pulseDuration.value);
                    duty = (duration / 1000) * freq;
                    // Update duty cycle field for display
                    dutyCycle.value = (duty * 100).toFixed(1);
                }
                
                // Calculate average current
                const avgCurr = current * duty;
                
                // Calculate power consumption
                const power = volt * avgCurr / 1000; // Convert to Watts
                
                // Calculate total runtime in hours
                const runtime = battery / avgCurr;
                
                // Calculate number of cycles
                const cycles = Math.floor(runtime * 60 / cycle);
                
                // Update display
                avgCurrent.textContent = `${avgCurr.toFixed(1)} mA`;
                powerDraw.textContent = `${power.toFixed(2)} W`;
                totalRuntime.textContent = `${runtime.toFixed(1)} hours`;
                cycleCount.textContent = `${cycles} cycles`;
                
                // Update final result
                finalResult.textContent = `Your battery will last for approximately ${runtime.toFixed(1)} hours`;
                
                // Add pulse animation
                finalResult.classList.add('pulse-animation');
                setTimeout(() => {
                    finalResult.classList.remove('pulse-animation');
                }, 2000);
            }
            
            // Initial calculation
            calculateResults();
        });
    </script>
</body>
</html>
